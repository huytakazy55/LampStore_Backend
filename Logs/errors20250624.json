{"Timestamp":"2025-06-24T15:31:42.3620660+00:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"159d36b195ff5c8b14cecf4569898b45","SpanId":"05443acad15216bd","Properties":{"elapsed":"13","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p13='?' (Size = 1000), @p14='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (Size = 4000), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = Guid), @p35='?' (DbType = Guid), @p36='?' (Size = 4000), @p37='?' (DbType = Guid), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (DbType = Guid), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = Guid), @p47='?' (DbType = Guid), @p48='?' (Size = 4000), @p49='?' (DbType = Guid), @p50='?' (DbType = Guid), @p51='?' (Size = 4000), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (Size = 4000)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET NOCOUNT ON;\nINSERT INTO [Products] ([Id], [CategoryId], [DateAdded], [Description], [Favorites], [Name], [ReviewCount], [SellCount], [Status], [Tags], [ViewCount])\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);\nINSERT INTO [ProductVariant] ([Id], [DiscountPrice], [Materials], [Price], [ProductId], [SKU], [Stock], [Weight])\nVALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);\nINSERT INTO [VariantTypes] ([Id], [Name], [ProductId])\nVALUES (@p19, @p20, @p21),\n(@p22, @p23, @p24),\n(@p25, @p26, @p27);\nINSERT INTO [VariantValues] ([Id], [TypeId], [Value])\nVALUES (@p28, @p29, @p30),\n(@p31, @p32, @p33),\n(@p34, @p35, @p36),\n(@p37, @p38, @p39),\n(@p40, @p41, @p42),\n(@p43, @p44, @p45),\n(@p46, @p47, @p48),\n(@p49, @p50, @p51),\n(@p52, @p53, @p54);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"feba64b7-83e1-46ee-8721-0bfcc1cfb28a","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ6G5P204F:00000005","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ6G5P204F"}}
{"Timestamp":"2025-06-24T15:31:42.4113605+00:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"159d36b195ff5c8b14cecf4569898b45","SpanId":"05443acad15216bd","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2632d01c-74d7-4747-bdad-153a4c370678\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"LampStoreProjects.Data.ApplicationDbContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__195_0(Task`1 result)\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2632d01c-74d7-4747-bdad-153a4c370678\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"feba64b7-83e1-46ee-8721-0bfcc1cfb28a","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ6G5P204F:00000005","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ6G5P204F"}}
{"Timestamp":"2025-06-24T16:18:02.1619778+00:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"62352c1e85d01b73a9ec0e39424cc7ca","SpanId":"efcd4694a2ff03af","Properties":{"elapsed":"4","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p13='?' (Size = 1000), @p14='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (Size = 4000), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = Guid), @p35='?' (DbType = Guid), @p36='?' (Size = 4000), @p37='?' (DbType = Guid), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (DbType = Guid), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = Guid), @p47='?' (DbType = Guid), @p48='?' (Size = 4000), @p49='?' (DbType = Guid), @p50='?' (DbType = Guid), @p51='?' (Size = 4000), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (Size = 4000)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET NOCOUNT ON;\nINSERT INTO [Products] ([Id], [CategoryId], [DateAdded], [Description], [Favorites], [Name], [ReviewCount], [SellCount], [Status], [Tags], [ViewCount])\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);\nINSERT INTO [ProductVariant] ([Id], [DiscountPrice], [Materials], [Price], [ProductId], [SKU], [Stock], [Weight])\nVALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);\nINSERT INTO [VariantTypes] ([Id], [Name], [ProductId])\nVALUES (@p19, @p20, @p21),\n(@p22, @p23, @p24),\n(@p25, @p26, @p27);\nINSERT INTO [VariantValues] ([Id], [TypeId], [Value])\nVALUES (@p28, @p29, @p30),\n(@p31, @p32, @p33),\n(@p34, @p35, @p36),\n(@p37, @p38, @p39),\n(@p40, @p41, @p42),\n(@p43, @p44, @p45),\n(@p46, @p47, @p48),\n(@p49, @p50, @p51),\n(@p52, @p53, @p54);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258P:0000000C","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258P"}}
{"Timestamp":"2025-06-24T16:18:02.2004469+00:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"62352c1e85d01b73a9ec0e39424cc7ca","SpanId":"efcd4694a2ff03af","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2f91c7fb-3608-4ff6-8e99-54d753de1b95\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"LampStoreProjects.Data.ApplicationDbContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2f91c7fb-3608-4ff6-8e99-54d753de1b95\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258P:0000000C","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258P"}}
{"Timestamp":"2025-06-24T16:18:16.8038727+00:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"e396f94e44f6ae1df2c4a2e188e8b085","SpanId":"76005226b6ea9389","Properties":{"elapsed":"3","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p13='?' (Size = 1000), @p14='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (Size = 4000), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = Guid), @p35='?' (DbType = Guid), @p36='?' (Size = 4000), @p37='?' (DbType = Guid), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (DbType = Guid), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = Guid), @p47='?' (DbType = Guid), @p48='?' (Size = 4000), @p49='?' (DbType = Guid), @p50='?' (DbType = Guid), @p51='?' (Size = 4000), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (Size = 4000)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET NOCOUNT ON;\nINSERT INTO [Products] ([Id], [CategoryId], [DateAdded], [Description], [Favorites], [Name], [ReviewCount], [SellCount], [Status], [Tags], [ViewCount])\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);\nINSERT INTO [ProductVariant] ([Id], [DiscountPrice], [Materials], [Price], [ProductId], [SKU], [Stock], [Weight])\nVALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);\nINSERT INTO [VariantTypes] ([Id], [Name], [ProductId])\nVALUES (@p19, @p20, @p21),\n(@p22, @p23, @p24),\n(@p25, @p26, @p27);\nINSERT INTO [VariantValues] ([Id], [TypeId], [Value])\nVALUES (@p28, @p29, @p30),\n(@p31, @p32, @p33),\n(@p34, @p35, @p36),\n(@p37, @p38, @p39),\n(@p40, @p41, @p42),\n(@p43, @p44, @p45),\n(@p46, @p47, @p48),\n(@p49, @p50, @p51),\n(@p52, @p53, @p54);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258P:0000000D","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258P"}}
{"Timestamp":"2025-06-24T16:18:16.8071842+00:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"e396f94e44f6ae1df2c4a2e188e8b085","SpanId":"76005226b6ea9389","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2f91c7fb-3608-4ff6-8e99-54d753de1b95\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"LampStoreProjects.Data.ApplicationDbContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:2f91c7fb-3608-4ff6-8e99-54d753de1b95\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258P:0000000D","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258P"}}
{"Timestamp":"2025-06-24T16:20:48.9173355+00:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"7f839ea37a40f2d99a66629412092dbf","SpanId":"28512eeec89e6865","Properties":{"elapsed":"2","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p13='?' (Size = 1000), @p14='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (Size = 4000), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = Guid), @p35='?' (DbType = Guid), @p36='?' (Size = 4000), @p37='?' (DbType = Guid), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (DbType = Guid), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = Guid), @p47='?' (DbType = Guid), @p48='?' (Size = 4000), @p49='?' (DbType = Guid), @p50='?' (DbType = Guid), @p51='?' (Size = 4000), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (Size = 4000)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET NOCOUNT ON;\nINSERT INTO [Products] ([Id], [CategoryId], [DateAdded], [Description], [Favorites], [Name], [ReviewCount], [SellCount], [Status], [Tags], [ViewCount])\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);\nINSERT INTO [ProductVariant] ([Id], [DiscountPrice], [Materials], [Price], [ProductId], [SKU], [Stock], [Weight])\nVALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);\nINSERT INTO [VariantTypes] ([Id], [Name], [ProductId])\nVALUES (@p19, @p20, @p21),\n(@p22, @p23, @p24),\n(@p25, @p26, @p27);\nINSERT INTO [VariantValues] ([Id], [TypeId], [Value])\nVALUES (@p28, @p29, @p30),\n(@p31, @p32, @p33),\n(@p34, @p35, @p36),\n(@p37, @p38, @p39),\n(@p40, @p41, @p42),\n(@p43, @p44, @p45),\n(@p46, @p47, @p48),\n(@p49, @p50, @p51),\n(@p52, @p53, @p54);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258V:00000004","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258V"}}
{"Timestamp":"2025-06-24T16:20:48.9193710+00:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"7f839ea37a40f2d99a66629412092dbf","SpanId":"28512eeec89e6865","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:6b3520c7-c428-4b98-aab9-a63af2af7d34\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"LampStoreProjects.Data.ApplicationDbContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:6b3520c7-c428-4b98-aab9-a63af2af7d34\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ7785258V:00000004","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ7785258V"}}
{"Timestamp":"2025-06-24T16:21:39.9439832+00:00","Level":"Error","MessageTemplate":"Failed executing DbCommand ({elapsed}ms) [Parameters=[{parameters}], CommandType='{commandType}', CommandTimeout='{commandTimeout}']{newLine}{commandText}","TraceId":"b89a13c21b1b5a693edcf489ce296492","SpanId":"610eb3bf620be29c","Properties":{"elapsed":"2","parameters":"@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (DbType = DateTime2), @p3='?' (Size = 1000), @p4='?' (DbType = Int32), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (Size = 4000), @p10='?' (DbType = Int32), @p11='?' (DbType = Guid), @p12='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p13='?' (Size = 1000), @p14='?' (Precision = 18) (Scale = 4) (DbType = Decimal), @p15='?' (DbType = Guid), @p16='?' (Size = 4000), @p17='?' (DbType = Int32), @p18='?' (DbType = Double), @p19='?' (DbType = Guid), @p20='?' (Size = 4000), @p21='?' (DbType = Guid), @p22='?' (DbType = Guid), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (DbType = Guid), @p26='?' (Size = 4000), @p27='?' (DbType = Guid), @p28='?' (DbType = Guid), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (DbType = Guid), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = Guid), @p35='?' (DbType = Guid), @p36='?' (Size = 4000), @p37='?' (DbType = Guid), @p38='?' (DbType = Guid), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (DbType = Guid), @p42='?' (Size = 4000), @p43='?' (DbType = Guid), @p44='?' (DbType = Guid), @p45='?' (Size = 4000), @p46='?' (DbType = Guid), @p47='?' (DbType = Guid), @p48='?' (Size = 4000), @p49='?' (DbType = Guid), @p50='?' (DbType = Guid), @p51='?' (Size = 4000), @p52='?' (DbType = Guid), @p53='?' (DbType = Guid), @p54='?' (Size = 4000)","commandType":"Text","commandTimeout":30,"newLine":"\n","commandText":"SET NOCOUNT ON;\nINSERT INTO [Products] ([Id], [CategoryId], [DateAdded], [Description], [Favorites], [Name], [ReviewCount], [SellCount], [Status], [Tags], [ViewCount])\nVALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);\nINSERT INTO [ProductVariant] ([Id], [DiscountPrice], [Materials], [Price], [ProductId], [SKU], [Stock], [Weight])\nVALUES (@p11, @p12, @p13, @p14, @p15, @p16, @p17, @p18);\nINSERT INTO [VariantTypes] ([Id], [Name], [ProductId])\nVALUES (@p19, @p20, @p21),\n(@p22, @p23, @p24),\n(@p25, @p26, @p27);\nINSERT INTO [VariantValues] ([Id], [TypeId], [Value])\nVALUES (@p28, @p29, @p30),\n(@p31, @p32, @p33),\n(@p34, @p35, @p36),\n(@p37, @p38, @p39),\n(@p40, @p41, @p42),\n(@p43, @p44, @p45),\n(@p46, @p47, @p48),\n(@p49, @p50, @p51),\n(@p52, @p53, @p54);","EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ77852591:00000008","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ77852591"}}
{"Timestamp":"2025-06-24T16:21:39.9464461+00:00","Level":"Error","MessageTemplate":"An exception occurred in the database while saving changes for context type '{contextType}'.{newline}{error}","TraceId":"b89a13c21b1b5a693edcf489ce296492","SpanId":"610eb3bf620be29c","Exception":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:39b0af47-b73b-4168-ba73-d61574497f42\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","Properties":{"contextType":"LampStoreProjects.Data.ApplicationDbContext","newline":"\n","error":"Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.\n ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint \"FK_Products_Categories_CategoryId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Categories\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_ProductVariant_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantTypes_Products_ProductId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.Products\", column 'Id'.\nThe INSERT statement conflicted with the FOREIGN KEY constraint \"FK_VariantValues_VariantTypes_TypeId\". The conflict occurred in database \"LampStoreDB\", table \"dbo.VariantTypes\", column 'Id'.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\nThe statement has been terminated.\n   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n--- End of stack trace from previous location ---\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)\n--- End of stack trace from previous location ---\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\nClientConnectionId:39b0af47-b73b-4168-ba73-d61574497f42\nError Number:547,State:0,Class:16\n   --- End of inner exception stack trace ---\n   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\n   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)","EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"e4734145-a871-49cc-b18b-b4aa8c1045c0","ActionName":"LampStoreProjects.Controllers.ProductsController.ImportProducts (LampStoreProjects)","RequestId":"0HNDJ77852591:00000008","RequestPath":"/api/Products/import","ConnectionId":"0HNDJ77852591"}}
